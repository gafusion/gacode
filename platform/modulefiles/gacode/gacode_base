#%Module
#
# Module file for setting the GACODE environmental variables once the $GACODE_ROOT environmental variable is set
# NOTE: machine-dependent environmental variables are set in the $GACODE_ROOT/platform/modulefiles/gacode machine modules directory
#

conflict gacode
module-whatis gacode

setenv GACODE_ROOT [file dirname [file dirname  [file dirname ${ModulesCurrentModulefile}]]]
set GACODE_ROOT $::env(GACODE_ROOT)
puts stderr "GACODE_PLATFORM=$::env(GACODE_PLATFORM) ; GACODE_ROOT=$::env(GACODE_ROOT)"

proc ModulesHelp { } {
        puts stderr "This modulefile sets the GACODE environmental variables once the $GACODE_ROOT environmental variable is set "
        puts stderr ""
        puts stderr "GACODE is the collection of transport and turbulence codes"
        puts stderr "maintained by the theory group at General Atomics, "
        puts stderr "including TGLF, TGYRO, GYRO, NEO, and GLF23."
        puts stderr ""
        puts stderr "https://fusion.gat.com/theory/Gyro"
        puts stderr ""
}

prepend-path PATH ${GACODE_ROOT}/tgyro/bin
prepend-path PATH ${GACODE_ROOT}/gyro/bin
prepend-path PATH ${GACODE_ROOT}/cgyro/bin
prepend-path PATH ${GACODE_ROOT}/neo/bin
prepend-path PATH ${GACODE_ROOT}/vgen/bin
prepend-path PATH ${GACODE_ROOT}/tglf/bin
prepend-path PATH ${GACODE_ROOT}/glf23/bin
prepend-path PATH ${GACODE_ROOT}/le3/bin
prepend-path PATH ${GACODE_ROOT}/shared/bin

prepend-path PYTHONPATH ${GACODE_ROOT}/python
prepend-path PYTHONPATH ${GACODE_ROOT}/cgyro/bin

append-path IDL_PATH ${GACODE_ROOT}/gyro/vugyro

setenv NN_LIB '-L$(NEURAL_ROOT) -I$(NEURAL_ROOT) -lbrainfusetf'
setenv EPEDNN_MODEL $NEURAL_ROOT/eped1nn/models/EPED_mb_128_pow_norm_common_30x10.pb
setenv TGLFNN_MODEL $NEURAL_ROOT/tglfnn/models/nn_SAT0_mb_1024_abs_reg_common_stair2x2x6.pb
setenv NEONN_MODEL $NEURAL_ROOT/neonn/models/NEO_mb_64_common_30.pb