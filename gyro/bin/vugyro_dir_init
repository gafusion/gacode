#!/bin/sh
#
# SCRIPT:
#  vugyro_dir_init 
#
# FUNCTION:
#  Create list of gyro simulation directories
#  for use by vugyro; save to gyro/.vugyrorc
#
# REVISIONS:
# 25 April 06: jc
#  Rewrite. 

# Generate directory/subdirectory list in .tmp
ls -R $1 | grep ":" > $GYRO_DIR/.tmp

# Strip ':' left from ls 
# (we choose not to use in-place flag, -i, for
# maximum compatibility).
#
# sed -i 's/://g' $GYRO_DIR/.tmp
sed 's/://g' $GYRO_DIR/.tmp > $GYRO_DIR/.tmp2
mv $GYRO_DIR/.tmp2 $GYRO_DIR/.tmp

if test -f $GYRO_DIR/.vugyrorc 
then
   rm $GYRO_DIR/.vugyrorc
fi

# Generate list of valid simulation directories
# (i.e., ones that contain profile_vugyro.out) 
touch $GYRO_DIR/.vugyrorc
for i in `cat $GYRO_DIR/.tmp`
do
   if test -f $i/profile_vugyro.out
   then
      echo $i >> $GYRO_DIR/.vugyrorc
   fi
done

# Remove temporary file
rm $GYRO_DIR/.tmp
