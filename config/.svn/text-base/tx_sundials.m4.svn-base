dnl ######################################################################
dnl
dnl File:	    tx_sundials.m4
dnl
dnl Purpose:	Determine where the sundials files are.
dnl
dnl Version:	$Id$
dnl
dnl Copyright 2001-2010, Tech-X Corporation.  Redistribution allowed provided
dnl this copyright statement remains intact.
dnl
dnl ######################################################################

builtin(include, config/txsearch.m4)

if test -n "$SUNDIALS"; then
  SUNDIALS_PATH=`dirname $SUNDIALS`
fi

if test x$parallel = xyes; then
  for i in `echo $SUPRA_SEARCH_PATH | tr ':' ' '`; do
    SUNDIALS_PATH="$SUNDIALS_PATH:$i/sundials-par"
  done
else
  for i in `echo $SUPRA_SEARCH_PATH | tr ':' ' '`; do
# Second is deprecated
    SUNDIALS_PATH="$SUNDIALS_PATH:$i/sundials:$i/sundials-ser"
  done
fi

unset SUNDIALS_INC
unset SUNDIALS_LIBS
unset SUNDIALS_RPLIBS
unset FOUND_SUNDIALS

if test x$parallel = xyes; then
  TX_LOCATE_PKG(
    [SUNDIALS],
    [$SUNDIALS_PATH],
    [cvode/cvode.h,cvodes/cvodes.h,kinsol/kinsol.h,sundials/sundials_types.h],
    [sundials_nvecparallel,sundials_cvode,sundials_cvodes,sundials_kinsol,sundials_ida],
    [include],
    [lib])
else
  TX_LOCATE_PKG(
    [SUNDIALS],
    [$SUNDIALS_PATH],
    [cvode/cvode.h,cvodes/cvodes.h,kinsol/kinsol.h,sundials/sundials_types.h],
    [sundials_nvecserial,sundials_cvode,sundials_cvodes,sundials_kinsol,sundials_ida],
    [include],
    [lib])
fi